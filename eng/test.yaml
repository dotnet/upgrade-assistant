steps: 
- task: DotNetCoreCLI@2
  displayName: Test C# (dotnet test)
  inputs:
    command: test
    projects: |
      $(Build.SourcesDirectory)\Microsoft.DotNet.UpgradeAssistant.sln
    arguments: > 
      --configuration $(_BuildConfig)
      --logger "trx;LogFilePrefix=TestResults-"
      --
      "RunConfiguration.ResultsDirectory=$(Build.ArtifactStagingDirectory)\TestResults"
  condition: succeededOrFailed()

- task: PublishTestResults@2
  displayName: Publish Test Results
  condition: succeededOrFailed()
  inputs:
    testResultsFormat: VSTest
    testResultsFiles: '**/TestResults-*' 
    searchFolder: $(Build.ArtifactStagingDirectory)\TestResults
    mergeTestResults: true
    testRunTitle: Basic Tests
    configuration: $(_BuildConfig)